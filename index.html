<!DOCTYPE html>
<html lang="en">

<head>
  <title>Freetube Forwarder</title>
</head>

<body style="text-align: center;" style="color: rgb(255, 255, 255);">

  <h2 style="color: rgb(0, 0, 0);" id="message">
    Opening...
  </h2>

  <footer>
    <p>For <a href="https://github.com/FreeTubeApp/FreeTube">Freetube</a> - The Private YouTube Client</p>
    <p>Add it as a search engine in your browser
      using <a
        href="https://mycroftproject.com/install.html?id=121990&basename=freetube-protocol&icontype=png&name=Freetube">Project
        Mycroft</a></p>
    <p>By @pacoworks</p>
    <button style="color: rgb(0, 0, 0);" onclick="history.back()">
      Back
    </button>
  </footer>

  <script>
    const message = document.getElementById("message");

    const urlParams = new URLSearchParams(window.location.search);
    const q = urlParams.get('q');
    if (!q) {
      message.innerText = "Please set a query parameter such as ?q=muppets";
    } else {
      if (q.startsWith('https')) {
        const targetUrl = 'freetube://' + q;
        message.innerHTML = `Opening: <a id="link" href=${targetUrl}>${q}</a>`;
        window.location.assign(targetUrl);
      } else {
        const targetUrl = 'freetube://https://www.youtube.com/results?search_query=' + q;
        message.innerHTML = `Searching for: <a id="link" href=${targetUrl}>${q}</a>`;
        window.location.assign(targetUrl);
      }
      history.back()
    }
  </script>

</body>
